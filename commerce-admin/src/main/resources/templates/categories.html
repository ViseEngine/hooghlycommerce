<!DOCTYPE html>
<html>
  <head>
    <div th:replace="header"></div>
  </head>
  <body>
    <div class="page home-page">
      <!-- Main Navbar-->
      <header class="header">
        <nav class="navbar">
          <!-- Search Box-->
          <div class="search-box">
            <button class="dismiss"><i class="icon-close"></i></button>
            <form id="searchForm" action="#" role="search">
              <input type="search" placeholder="What are you looking for..." class="form-control" />
            </form>
          </div>
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <!-- Navbar Header-->
              <div class="navbar-header">
                <!-- Navbar Brand --><a href="index.html" class="navbar-brand">
                  <div class="brand-text brand-big hidden-lg-down"><span>Hooghly </span><strong>CockPIT</strong></div>
                  <div class="brand-text brand-small"><strong>HC</strong></div></a>
                <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
              </div>
              <!-- Navbar Menu -->
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                <!-- Search-->
                <li class="nav-item d-flex align-items-center"><a id="search" href="#"><i class="icon-search"></i></a></li>
                <!-- Notifications-->
                <li class="nav-item dropdown"> <a id="notifications" rel="nofollow" data-target="#" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link"><i class="fa fa-bell-o"></i><span class="badge bg-red">12</span></a>
                  <ul aria-labelledby="notifications" class="dropdown-menu">
                    <li><a rel="nofollow" href="#" class="dropdown-item"> 
                        <div class="notification">
                          <div class="notification-content"><i class="fa fa-envelope bg-green"></i>You have 6 new messages </div>
                          <div class="notification-time"><small>4 minutes ago</small></div>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item"> 
                        <div class="notification">
                          <div class="notification-content"><i class="fa fa-twitter bg-blue"></i>You have 2 followers</div>
                          <div class="notification-time"><small>4 minutes ago</small></div>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item"> 
                        <div class="notification">
                          <div class="notification-content"><i class="fa fa-upload bg-orange"></i>Server Rebooted</div>
                          <div class="notification-time"><small>4 minutes ago</small></div>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item"> 
                        <div class="notification">
                          <div class="notification-content"><i class="fa fa-twitter bg-blue"></i>You have 2 followers</div>
                          <div class="notification-time"><small>10 minutes ago</small></div>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item all-notifications text-center"> <strong>view all notifications                                            </strong></a></li>
                  </ul>
                </li>
                <!-- Messages                        -->
                <li class="nav-item dropdown"> <a id="messages" rel="nofollow" data-target="#" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link"><i class="fa fa-envelope-o"></i><span class="badge bg-orange">10</span></a>
                  <ul aria-labelledby="notifications" class="dropdown-menu">
                    <li><a rel="nofollow" href="#" class="dropdown-item d-flex"> 
                        <div class="msg-profile"> <img th:src="@{/webjars/commerce/admin/images/avatar-1.jpg}" alt="..." class="img-fluid rounded-circle" /></div>
                        <div class="msg-body">
                          <h3 class="h5">Jason Doe</h3><span>Sent You Message</span>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item d-flex"> 
                        <div class="msg-profile"> <img th:src="@{/webjars/commerce/admin/images/avatar-2.jpg}" alt="..." class="img-fluid rounded-circle" /></div>
                        <div class="msg-body">
                          <h3 class="h5">Frank Williams</h3><span>Sent You Message</span>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item d-flex"> 
                        <div class="msg-profile"> <img th:src="@{/webjars/commerce/admin/images/avatar-3.jpg}" alt="..." class="img-fluid rounded-circle" /></div>
                        <div class="msg-body">
                          <h3 class="h5">Ashley Wood</h3><span>Sent You Message</span>
                        </div></a></li>
                    <li><a rel="nofollow" href="#" class="dropdown-item all-notifications text-center"> <strong>Read all messages    </strong></a></li>
                  </ul>
                </li>
                <!-- Logout    -->
                <li class="nav-item"><a href="login.html" class="nav-link logout">Logout<i class="fa fa-sign-out"></i></a></li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <div class="page-content d-flex align-items-stretch">
       	<div th:replace="navbar"></div>
        <div class="content-inner">
          <!-- Page Header-->
          <header class="page-header">
            <div class="container-fluid">
              <h2 class="no-margin-bottom">Categories</h2>
            </div>
          </header>
         <!-- Breadcrumb-->
          <ul class="breadcrumb">
            <div class="container-fluid">
              <li class="breadcrumb-item"><a href="index.html">Home</a></li>
              <li class="breadcrumb-item active">Categories</li>
            </div>
          </ul>
          
          <section>
          	<div class="container-fluid">
              <div class="row bg-white has-shadow">
              	<div class="col-xl-3 col-sm-6">
          			<div id="tree"></div>
          			</div>
          		</div>
          		
          		<form id="productsDisplayForm" method="get" action="/admin/secure/products/list">
          			<input type="hidden" value="" name="categoryId" id="categoryId"/>
          		</form>
          		
          	</div>
          </section>
          
          <!-- Page Footer-->
          <footer class="main-footer">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-6">
                  <p>Hooghly Commerce &copy; 2017-2019</p>
                </div>
                <div class="col-sm-6 text-right">
                  <p>Design by <a href="https://bootstrapious.com/admin-templates" class="external">Bootstrapious</a></p>
                  
                </div>
              </div>
            </div>
          </footer>
        </div>
      </div>
    </div>
    <!-- Javascript files-->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" type="text/javascript"></script>
  	<script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>

  	<link href="//cdn.jsdelivr.net/jquery.fancytree/2/skin-win8/ui.fancytree.min.css" type="text/css" rel="stylesheet" />
  	<script src="//cdn.jsdelivr.net/jquery.fancytree/2/jquery.fancytree-all.min.js" type="text/javascript"></script>

    
    
    <script th:src="@{/webjars/commerce/admin/js/tether.min.js}"></script>
    <script th:src="@{/webjars/commerce/admin/js/bootstrap.min.js}"></script>
    <script th:src="@{/webjars/commerce/admin/js/jquery.cookie.js}"> </script>
    <script th:src="@{/webjars/commerce/admin/js/jquery.validate.min.js}"></script>
    
    <script th:src="@{/webjars/commerce/admin/js/front.js}"></script>
   	
   	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.2.3/jquery.contextMenu.min.js"></script>
   
    <script>
    
    $(function() {
		initTree();
		initTreeContextMenu();
    });
    
    function initTree() {
    	
    	
    
	    $("#tree").fancytree({
	    	  source:{
	    		    url: "category/list",
	    		    cache: false
	    		  },
    		  lazyLoad: function(event, data){
    			  alert('here')
    		      var node = data.node;
    		      data.result = {
    		    		  url: "category/list",
    		    		  data: {mode: "children", parent: node.key},
    		      		  cache: false
    		      }
    		  }
	    		
	    });
	    	
    }
    
    function initTreeContextMenu() {
    	$.contextMenu({
    	      selector: "#tree span.fancytree-node",
    	      items: {
    	        
    	      "showproducts": {name: "Show Products", icon: "list",
      	            callback: function(key, opt){
      	              var node = $.ui.fancytree.getNode(opt.$trigger);
      	              
      	             
      	              $("#categoryId").val(node.key);
      	                    	              
      	              alert("Clicked on " + key + " on " + node.key);
      	              $( "#productsDisplayForm" ).trigger( "submit" );
      	              
      	            }
      	          }  ,
    	    	"cut": {name: "Cut", icon: "cut",
    	            callback: function(key, opt){
    	              var node = $.ui.fancytree.getNode(opt.$trigger);
    	              alert("Clicked on " + key + " on " + node);
    	            }
    	          },
    	        "copy": {name: "Copy", icon: "copy"},
    	        "paste": {name: "Paste", icon: "paste", disabled: false },
    	        "sep1": "----",
    	        "edit": {name: "Edit", icon: "edit", disabled: true },
    	        "delete": {name: "Delete", icon: "delete", disabled: true },
    	        "more": {name: "More", items: {
    	          "sub1": {name: "Sub 1"},
    	          "sub1": {name: "Sub 2"}
    	          }}
    	        },
    	      callback: function(itemKey, opt) {
    	        var node = $.ui.fancytree.getNode(opt.$trigger);
    	        alert("select " + itemKey + " on " + node);
    	      }
    	    });
    }
    
    </script>
    
  </body>
</html>